        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap');
         @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&family=Outfit:wght@500;700;900&display=swap');
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: #0b1121;
            margin: 0; padding: 0;
            font-family: 'Inter', sans-serif;
            color: #cbd5e1;
            font-size: 15px;
            /* KH√ìA CU·ªòN TRANG WEB - CH·ªà CU·ªòN KHUNG CHAT */
            overflow: hidden; 
            position: fixed; 
            width: 100%; 
            height: 100%;
        }

        .chat-container {
            /* GHIM CH·∫∂T KHUNG CHAT V√ÄO 4 G√ìC M√ÄN H√åNH */
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            display: flex;
            flex-direction: column;
            height: 100%;     /* Fallback */
            height: 100dvh;  /* Chi·ªÅu cao th·ª±c t·∫ø tr√™n Mobile */
            overflow: hidden;
        }

        /* HEADER */
        header {
            flex-shrink: 0;
            background: rgba(11, 17, 33, 0.95);
            backdrop-filter: blur(10px);
            z-index: 10;
            border-bottom: 1px solid #1e293b;
        }

        /* --- ‚ú® RAG STATUS BAR NEON --- */
        .rag-bar-container {
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 8px 12px;
            margin-bottom: 8px;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.1);
            border-left: 3px solid #3b82f6;
            animation: slideIn 0.3s ease-out;
        }

        /* Thanh ti·∫øn tr√¨nh ph√°t s√°ng */
        .rag-progress-track {
            background: #1e293b;
            height: 6px;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 6px;
            position: relative;
        }

        .rag-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #2dd4bf);
            background-size: 200% 200%;
            width: 0%;
            box-shadow: 0 0 10px #3b82f6; /* Glow effect */
            transition: width 0.1s linear;
            animation: neon-flow 2s infinite linear; /* T√°i s·ª≠ d·ª•ng animation c√≥ s·∫µn */
        }

        /* Ch·ªØ nh·∫•p nh√°y */
        .rag-text-glow {
            color: #60a5fa;
            text-shadow: 0 0 5px rgba(59, 130, 246, 0.5);
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* KHUNG CHAT */
        .messages-area {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            width: 100%;
            scroll-behavior: smooth; /* T·∫Øt smooth scroll native ƒë·ªÉ JS x·ª≠ l√Ω m∆∞·ª£t h∆°n khi stream */
            -webkit-overflow-scrolling: touch;
            padding-bottom: 20px;
            overscroll-behavior-y: contain; /* üëà Gi·ªØ scroll n·∫±m g·ªçn trong khung chat, kh√¥ng lan ra body */
        }
        
        .messages-area::-webkit-scrollbar { width: 4px; }
        .messages-area::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }

        .message { margin-bottom: 2rem; animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .user-message { display: flex; justify-content: flex-end; }
        .user-bubble {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            color: white;
            padding: 0.8rem 1rem;
            border-radius: 1.2rem 1.2rem 0 1.2rem;
            max-width: 85%;
            font-size: 15px;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        /* AI CARD & STYLING */
        .ai-response-group {
            display: flex; flex-direction: column; gap: 15px; width: 100%;
        }

        .ai-card {
            background: #151e32;
            border: 1px solid #334155;
            border-radius: 12px;
            overflow: hidden;
            transition: border-color 0.3s;
        }
        .ai-card:hover { border-color: #475569; }
        
        .ai-header {
            background: #0f172a;
            padding: 6px 12px;
            font-size: 11px;
            color: #94a3b8;
            border-bottom: 1px solid #1e293b;
            display: flex; justify-content: space-between; align-items: center;
        }
        .ai-model-name { font-weight: bold; color: #38bdf8; display: flex; align-items: center; gap: 6px; }

        .ai-bubble {
            padding: 1rem;
            color: #e2e8f0;
            line-height: 1.8;
            letter-spacing: 0.015em;
            font-weight: 300;
            font-size: 15px;
            word-wrap: break-word;
            overflow-wrap: break-word; /* Quan tr·ªçng ƒë·ªÉ kh√¥ng v·ª° layout */
        }

        /* --- ‚ú® NEON CYBERPUNK STYLES (UPGRADE) --- */
        /* --- PYTHON TERMINAL & PLOT STYLES --- */
        .code-action-bar {
            display: flex; justify-content: flex-end; gap: 10px;
            background: #1e293b; padding: 5px 10px;
            border-top: 1px solid #334155; border-radius: 0 0 8px 8px;
            margin-top: -1em; margin-bottom: 1em; /* D√≠nh li·ªÅn v·ªõi khung code */
        }
        .run-btn {
            font-size: 12px; font-weight: bold; color: #a5f3fc; cursor: pointer;
            display: flex; align-items: center; gap: 5px;
            transition: 0.3s;
        }
        .run-btn:hover { color: #22d3ee; text-shadow: 0 0 8px #22d3ee; }

        .python-output {
            margin-top: 10px; padding: 10px; border-radius: 8px;
            background: #000; border: 1px dashed #334155;
            font-family: 'JetBrains Mono', monospace; font-size: 13px; color: #fff;
            display: none; /* ·∫®n khi ch∆∞a c√≥ k·∫øt qu·∫£ */
        }
        .python-output.active { display: block; animation: fadeIn 0.3s; }
        .python-output img { 
            max-width: 100%; 
            height: auto; /* T·ª± ƒë·ªông ch·ªânh chi·ªÅu cao theo t·ª∑ l·ªá */
            display: block; /* Tr√°nh kho·∫£ng tr·∫Øng th·ª´a ·ªü d∆∞·ªõi */
            margin: 0 auto; /* CƒÉn gi·ªØa */
            border-radius: 6px; 
            border: 1px solid #334155; 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5); /* Th√™m b√≥ng ƒë·ªï cho n·ªïi */
        }

        /* 1. Headers: M√†u chuy·ªÉn ƒë·ªông & Ph√°t s√°ng */
        @keyframes neon-flow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .ai-bubble h1, .ai-bubble h2, .ai-bubble h3 { 
            font-family: 'Outfit', sans-serif; 
            letter-spacing: -0.02em;
            font-weight: 800;
            margin-top: 1.2em; 
            margin-bottom: 0.6em; 
            /* Gradient 3 m√†u r·ª±c r·ª° h∆°n */
            background: linear-gradient(270deg, #3b82f6, #8b5cf6, #f472b6, #3b82f6);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: neon-flow 6s ease infinite; /* Ch·ªØ ƒë·ªïi m√†u li√™n t·ª•c */
            filter: drop-shadow(0 0 5px rgba(139, 92, 246, 0.3)); /* ƒê·ªï b√≥ng ph√°t s√°ng */
        }

        .ai-bubble h1 { 
            font-size: 1.8em; 
            border-bottom: 2px solid #334155; 
            padding-bottom: 0.3em;
            border-image: linear-gradient(to right, #3b82f6, #f472b6, transparent) 1;
        }

        /* 2. Text Emphasis: T√¥ ƒë·∫≠m & Nghi√™ng ph√°t s√°ng */
        .ai-bubble strong { 
            color: #facc15; 
            font-weight: 700;
            text-shadow: 0 0 10px rgba(250, 204, 21, 0.4); /* V√†ng neon */
        }
        .ai-bubble em { 
            color: #f472b6; 
            font-style: italic;
            text-shadow: 0 0 8px rgba(244, 114, 182, 0.4); /* H·ªìng neon */
        }
        .ai-bubble u { text-decoration-color: #38bdf8; text-decoration-thickness: 2px; }

        /* 3. Lists */
        .ai-bubble ul, .ai-bubble ol { padding-left: 1.5em; margin: 0.8em 0; color: #cbd5e1; }
        .ai-bubble ul li::marker { color: #f472b6; } /* Bullet h·ªìng */
        .ai-bubble ol li::marker { color: #38bdf8; font-weight: bold; } /* S·ªë xanh */

        /* 4. Blockquotes: K√≠nh trong su·ªët (Glassmorphism) */
        .ai-bubble blockquote { 
            border-left: 4px solid #a855f7;
            background: linear-gradient(90deg, rgba(168, 85, 247, 0.1), transparent);
            padding: 1em; 
            margin: 1em 0;
            border-radius: 0 12px 12px 0;
            color: #e2e8f0; 
            box-shadow: inset 10px 0 20px -10px rgba(168, 85, 247, 0.2);
        }

        /* 5. Inline Code: N·ªÅn t·ªëi + Vi·ªÅn neon */
        .ai-bubble p code, .ai-bubble li code {
            font-family: 'JetBrains Mono', monospace;
            background: rgba(15, 23, 42, 0.8); 
            color: #2dd4bf; /* M√†u xanh ng·ªçc */
            border: 1px solid rgba(45, 212, 191, 0.3);
            padding: 2px 6px;
            border-radius: 6px;
            font-size: 0.9em;
            box-shadow: 0 0 5px rgba(45, 212, 191, 0.1);
        }

        /* 6. Links */
        .ai-bubble a { 
            color: #38bdf8;
            text-decoration: none; 
            border-bottom: 1px dashed #38bdf8; 
            transition: all 0.2s;
        }
        .ai-bubble a:hover { 
            color: #fff;
            background: #0ea5e9;
            padding: 0 4px;
            border-radius: 4px;
            box-shadow: 0 0 10px #0ea5e9;
            border-bottom: none;
        }
        
        /* --- FIX L·ªñI ƒê∆† C·∫¢M ·ª®NG & √âP SCROLL (V2) --- */

        /* 1. C·∫•u h√¨nh chung cho Code & Table */
        .ai-bubble pre, 
        .ai-bubble table {
            /* Quan tr·ªçng: B·ªè touch-action ƒë·ªÉ tr√¨nh duy·ªát t·ª± quy·∫øt ƒë·ªãnh h∆∞·ªõng vu·ªët */
            
            background: #282c34; 
            border-radius: 0.5rem;
            border: 1px solid #475569;
            
            display: block;
            width: 100%;
            
            /* B·∫Øt bu·ªôc hi·ªÉn th·ªã thanh cu·ªôn n·∫øu tr√†n */
            overflow-x: auto !important;
            
            /* Gi√∫p vu·ªët c√≥ ƒë√† tr√™n iOS */
            -webkit-overflow-scrolling: touch;
        }

        /* 2. Style ri√™ng cho Code block */
        .ai-bubble pre {
            margin: 1em 0;
            padding: 1em;
            position: relative;
        }

        /* Style cho Text Art / Neon Code */
        .ai-bubble pre code.language-text {
            color: #a5f3fc !important;
            text-shadow: 0 0 6px #0891b2;
            font-weight: 700;
            line-height: 1.1;
        }

        .ai-bubble pre code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            background: transparent;
            padding: 0;
            color: inherit; 
            white-space: pre; /* Gi·ªØ nguy√™n ƒë·ªãnh d·∫°ng ngang */
        }

        /* 3. Style ri√™ng cho Table */
        .ai-bubble table {
            border-collapse: collapse; 
            margin: 1em 0; 
            font-size: 0.95em; 
        }
        .ai-bubble th, .ai-bubble td { 
            border: 1px solid #334155; 
            padding: 10px; 
            text-align: left; 
            white-space: nowrap; 
        }
        .ai-bubble th { background: #1e293b; color: #38bdf8; }

        /* üî• C·∫§P C·ª®U MOBILE: √âp chi·ªÅu r·ªông khung code nh·ªè h∆°n m√†n h√¨nh üî• */
        @media (max-width: 768px) {
            .ai-bubble pre,
            .ai-bubble table {
                /* T√≠nh to√°n: 100% m√†n h√¨nh tr·ª´ ƒëi l·ªÅ tr√°i ph·∫£i (kho·∫£ng 50px) */
                /* N·∫øu kh√¥ng c√≥ d√≤ng n√†y, khung code s·∫Ω ƒë·∫©y khung chat r·ªông ra => Kh√¥ng scroll ƒë∆∞·ª£c */
                max-width: calc(100vw - 60px) !important; 
                
                /* ƒê·∫£m b·∫£o thanh cu·ªôn hi·ªán ra */
                display: block;
            }
        }

        /* Links */
        .ai-bubble a { color: #38bdf8; text-decoration: none; border-bottom: 1px dotted #38bdf8; }
        .ai-bubble a:hover { color: #60a5fa; border-bottom-style: solid; }

        /* SUGGESTION CHIPS */
        .suggestion-chips { display: flex; gap: 8px; overflow-x: auto; padding: 0 1rem 0.5rem 1rem; scrollbar-width: none; }
        .suggestion-chips::-webkit-scrollbar { display: none; }
        .chip {
            flex-shrink: 0; background: #1e293b; color: #94a3b8; border: 1px solid #334155;
            padding: 6px 12px; border-radius: 20px; font-size: 12px; cursor: pointer; transition: 0.2s;
        }
        .chip:hover { background: #334155; color: #fff; border-color: #60a5fa; }

        /* INPUT AREA */
        .input-area {
            flex-shrink: 0; padding: 0.5rem 0.8rem 0.8rem 0.8rem;
            background: #0b1121; border-top: 1px solid #1e293b; z-index: 20;
        }
        
        .squad-mode-toggle {
            display: flex; align-items: center; gap: 8px; font-size: 11px;
            color: #94a3b8; cursor: pointer; user-select: none;
            padding: 4px 8px; border-radius: 12px;
        }
        .toggle-switch {
            position: relative; width: 32px; height: 18px; background: #334155; border-radius: 15px; transition: 0.3s;
        }
        .toggle-switch::after {
            content: ''; position: absolute; top: 2px; left: 2px; width: 14px; height: 14px; background: white; border-radius: 50%; transition: 0.3s;
        }
        .squad-mode-toggle.active .toggle-switch { background: #8b5cf6; } /* M√†u t√≠m m·ªông m∆° */
        .squad-mode-toggle.active .toggle-switch::after { transform: translateX(14px); }
        .squad-mode-toggle.active span { color: #a78bfa; font-weight: bold; }

        .input-wrapper {
            background: #1e293b; border-radius: 24px; border: 1px solid #334155;
            display: flex; align-items: flex-end; padding: 6px; transition: border-color 0.2s;
        }
        .input-wrapper:focus-within { border-color: #3b82f6; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2); }

        textarea {
            width: 100%; background: transparent; border: none; outline: none; color: white;
            padding: 10px; resize: none; max-height: 120px; min-height: 44px; font-size: 16px;
        }

        .action-btn {
            background: transparent; color: #94a3b8; width: 36px; height: 36px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            margin-bottom: 4px; cursor: pointer; border: none; transition: 0.2s;
        }
        .action-btn:hover { color: #e2e8f0; background: #334155; }
        .send-btn { color: #3b82f6; }
        .send-btn:hover { background: #2563eb; color: white; }
        .stop-btn { color: #ef4444; display: none; }
        .stop-btn:hover { background: #dc2626; color: white; }

        /* MODAL */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(5px);
            display: none; justify-content: center; align-items: center; z-index: 50;
        }
        .modal-overlay.active { display: flex; }
        .modal-content {
            background: #151e32; padding: 1.5rem; border-radius: 1rem; width: 90%; max-width: 500px;
            border: 1px solid #334155; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            max-height: 90vh; overflow-y: auto;
        }
        .setting-input {
            width: 100%; background: #0b1121; border: 1px solid #334155;
            color: #e2e8f0; padding: 10px; border-radius: 8px; font-size: 14px;
        }
        .setting-input:focus { border-color: #3b82f6; outline: none; }
        
        /* Model List */
        .model-list-container {
            max-height: 150px; overflow-y: auto; border: 1px solid #334155;
            border-radius: 8px; padding: 8px; background: #0b1121; margin-bottom: 10px;
        }
        .model-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 8px; background: #1e293b; margin-bottom: 5px; border-radius: 6px; font-size: 13px;
        }
        .remove-model-btn { color: #ef4444; cursor: pointer; padding: 4px; }

        /* --- MOBILE RESPONSIVE FIXES (ƒê√É TH√äM M·ªöI) --- */
        @media (max-width: 768px) {
            .messages-area { padding: 0.5rem; } /* Gi·∫£m l·ªÅ tr√™n mobile */
            .user-bubble { max-width: 90%; padding: 0.6rem 0.8rem; font-size: 14px; }
            .ai-bubble { padding: 0.8rem; font-size: 14px; }
            .ai-bubble pre { font-size: 12px; padding: 0.6em; }
            .input-area { padding: 0.5rem; }
            
            /* Tinh ch·ªânh header/toggle cho g·ªçn */
            .squad-mode-toggle { font-size: 10px; }
            .toggle-switch { width: 28px; height: 16px; }
            .toggle-switch::after { width: 12px; height: 12px; }
            .squad-mode-toggle.active .toggle-switch::after { transform: translateX(12px); }


            /* File preview g·ªçn h∆°n */
            #filePreview span { max-width: 100px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; display: inline-block; vertical-align: bottom; }
        }
        /* --- DEBATE MODE STYLES --- */
        .squad-mode-toggle.debate-active .toggle-switch { background: #ef4444; box-shadow: 0 0 10px #ef4444; }
        .squad-mode-toggle.debate-active .toggle-switch::after { transform: translateX(14px); background: #fff; }
        .debate-active-border { border: 1px solid #ef4444 !important; box-shadow: 0 0 15px rgba(239, 68, 68, 0.2); }

        /* --- CINEMA MODE STYLES --- */
        .cinema-title {
            text-align: center;
            background: linear-gradient(90deg, #000, #1a1a2e, #000);
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #475569;
            margin-bottom: 15px;
            position: relative;
        }

        .cinema-title h3 {
            color: #fbbf24;
            font-family: 'Outfit', sans-serif;
            font-size: 16px;
            margin: 0;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .film-strip {
            height: 3px;
            background: repeating-linear-gradient(
                90deg,
                transparent,
                transparent 10px,
                #fbbf24 10px,
                #fbbf24 20px
            );
            flex: 1;
            margin: 0 10px;
        }

        .topic-banner {
            background: rgba(220, 38, 38, 0.2);
            border: 2px solid #ef4444;
            padding: 12px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #fecaca;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Outfit', sans-serif;
            letter-spacing: 1px;
        }

        .scene-desc {
            font-size: 11px;
            color: #94a3b8;
            text-align: center;
            margin-bottom: 20px;
            font-style: italic;
        }

        .cinema-screen {
            border: 3px solid #334155;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            background: #0f172a;
            position: relative;
            overflow: hidden;
        }

        .cinema-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #60a5fa, transparent);
        }

        .character-intro {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px dashed #475569;
            margin-bottom: 10px;
        }

        .character-a {
            color: #60a5fa;
            font-weight: bold;
            font-size: 12px;
        }

        .character-b {
            color: #f87171;
            font-weight: bold;
            font-size: 12px;
        }

        .vs {
            font-size: 20px;
            color: #fbbf24;
            animation: pulse 1.5s infinite;
        }

        .take-number {
            background: rgba(0, 0, 0, 0.3);
            padding: 1px 6px;
            border-radius: 10px;
            border: 1px solid #475569;
        }

        .film-ending {
            text-align: center;
            padding: 20px;
        }

        .credits-roll {
            animation: scrollUp 10s linear;
        }

        .credits {
            margin: 15px 0;
            font-size: 12px;
            color: #cbd5e1;
        }

        .credits div {
            margin: 5px 0;
            padding: 3px 0;
            border-bottom: 1px dotted #334155;
        }

        .review {
            margin-top: 20px;
            padding: 10px;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 8px;
            color: #a78bfa;
            font-size: 14px;
            font-weight: bold;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }

        @keyframes scrollUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Highlight dialogue bubbles for short lines */
        .ai-card .ai-bubble {
            font-size: 16px; /* L·ªõn h∆°n cho d·ªÖ ƒë·ªçc */
            font-weight: 500;
            line-height: 1.4;
            padding: 12px 15px;
        }

        /* Cinema mode specific */
        .ai-card[cinema-mode] .ai-bubble {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 4px solid;
            animation: typewriter 0.3s steps(20);
        }

        @keyframes typewriter {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }      
        
        /* Th√™m v√†o trong th·∫ª <style> */

        /* Tr·∫°ng th√°i Input khi ·ªü ch·∫ø ƒë·ªô Debate */
        .input-wrapper.debate-mode-active {
            border-color: #ef4444 !important; /* Vi·ªÅn ƒë·ªè */
            background: rgba(239, 68, 68, 0.05); /* N·ªÅn ƒë·ªè nh·∫°t */
            box-shadow: 0 0 15px rgba(239, 68, 68, 0.2); /* Ph√°t s√°ng ƒë·ªè */
        }

        /* Khi click v√†o input ·ªü ch·∫ø ƒë·ªô Debate */
        .input-wrapper.debate-mode-active:focus-within {
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.4);
            border-color: #f87171 !important;
        }

        /* ƒê·ªïi m√†u icon g·ª≠i th√†nh m√†u ƒë·ªè cho h·ª£p t√¥ng */
        .input-wrapper.debate-mode-active .send-btn {
            color: #ef4444;
        }
        .input-wrapper.debate-mode-active .send-btn:hover {
            background: #ef4444;
            color: white;
        }
            
        /* --- REFEREE JUDGE STYLES (TR·ªåNG T√ÄI) --- */
        .referee-card {
            border: 2px solid #fbbf24 !important; /* Vi·ªÅn v√†ng Gold */
            background: linear-gradient(180deg, rgba(251, 191, 36, 0.05) 0%, rgba(0,0,0,0) 100%) !important;
            margin-top: 30px;
            position: relative;
            overflow: hidden;
            animation: slideUp Referee 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        }

        /* Hi·ªáu ·ª©ng qu√©t s√°ng b√≥ng */
        .referee-card::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 50%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(251, 191, 36, 0.2), transparent);
            animation: shine 3s infinite;
        }

        .referee-header {
            background: #451a03;
            border-bottom: 1px solid #fbbf24;
            color: #fbbf24;
            padding: 10px;
            font-family: 'Outfit', sans-serif;
            text-transform: uppercase;
            font-weight: 900;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        /* Animation hi·ªÉn th·ªã */
        @keyframes slideUpReferee {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes shine {
            0% { left: -100%; }
            20% { left: 200%; }
            100% { left: 200%; }
        }

        /* --- SYNTHESIS MODE STYLES --- */
        .squad-mode-toggle.synthesis-active .toggle-switch { background: #fbbf24; box-shadow: 0 0 10px #fbbf24; }
        .squad-mode-toggle.synthesis-active .toggle-switch::after { transform: translateX(14px); background: #000; }

        .synthesis-card {
            border: 1px solid #fbbf24 !important;
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.05), rgba(0,0,0,0.2));
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.1);
        }
        .synthesis-step {
            font-size: 11px; color: #94a3b8; border-left: 2px solid #334155;
            padding-left: 10px; margin: 5px 0; opacity: 0.7;
        }
        .synthesis-step.active {
            color: #fbbf24; border-color: #fbbf24; opacity: 1; font-weight: bold;
            animation: pulse 1s infinite;
        }
        .raw-results-container {
            display: flex; gap: 5px; overflow-x: auto; padding-bottom: 5px; margin-bottom: 10px; opacity: 0.6;
        }
        .raw-card {
            min-width: 200px; font-size: 10px; background: #000; border: 1px solid #334155; padding: 5px; border-radius: 4px; max-height: 100px; overflow: hidden;
        }
